{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block header %}

<!-- Header -->
<header class="trips-head">
	<div class="container d-flex align-items-center">
		<div class="mx-auto text-center">
			<h1 class="text-light mx-auto my-0"></h1>
		</div>
	</div>
</header>

{% endblock %}

{% block content %}

<!-- Trip detail section -->
<section class="mt-5 mb-5">
	<div class="container">

		<div class="row">

            <div class="col-12 text-center mt-5 mb-5">
                <h1 class="text-uppercase">{{ trip.title }}</h1>
            </div>

			<!-- Big image -->
			<div class="col-lg-7">
				<img class="img-fluid img-box" src="{{ trip.img.all.0.img.url }}" alt="{{ trip.img.all.0.img_name }}">
            </div>
            
            <!-- Small images -->
            <div class="col-lg-2">
                {% for trip_image in trip.img.all %}
                    <img class="trip-img-thumbnail mb-3" src="{{ trip_image.img.url }}" alt="{{ trip_image.img_name }}">
                {% endfor %}
            </div>

            <!-- Trip details -->
            <div class="col-lg-3 jumbotron">
            
                <div class="col-12">
                    <h2>{{ trip.destination }}</h2>
                    <p>
                        <i class="far fa-clock"></i> {{ trip.duration }} Day</br>
                        {{ trip.distance|intcomma }} Km</br>
                        € {{ trip.price|intcomma }}</br>
                        {{ trip.slot }} seat(s)
                    </p>
                </div>

                <form id="select-trip-form" method="POST" class="col-12">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <label for="exampleFormControlSelect1"><i class="fas fa-space-shuttle"></i> Departure site</label>
                        <select class="form-control" id="departureSiteSelected">
                            <option value="" selected disabled>Choose site</option> 
                            {% for departure in departures %}
                                <option value="{{ departure.id }}">{{ departure.site_name }}, {{ departure.country }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="exampleFormControlSelect1"><i class="fas fa-calendar-day"></i> Departure dates</label>
                        <select class="form-control" id="exampleFormControlSelect1">
                            <option value="" selected disabled>Choose date</option> 
                            {% for departure in departures %}
                                <option value="" disabled>{{ departure.site_name }}</option>
                                {% for date in departure.date %}
                                    <option value="{{ date }}">{{ date }}</option>
                                {% endfor %}
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="exampleFormControlSelect1"><i class="fas fa-user-friends"></i> Passenger(s)</label>
                        <select class="form-control" id="exampleFormControlSelect1">
                            {% for i in slot %}
                                {% if i == 0 %}
                                {% else %}
                                    <option>{{ i }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group text-right">
                        <button type="submit" class="btn btn-primary btn-subscribe">Book</button>
                    </div>

                </form>

		    </div>

		</div>

        <!-- Trip description -->
        <div class="row">
            <div class="col-12 jumbotron">
                <h2>Trip description</h2>
                <p>{{ trip.description }}</p>
            </div>
        </div>

        <!-- Requirements -->
        <div class="row">
            <div class="col-12 jumbotron">
                <h2>Requirements</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
        </div>

        <!-- Safety -->
        <div class="row">
            <div class="col-12 jumbotron">
                <h2>Safety</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
        </div>
        
	</div>
</section>

<script type="text/javascript">
    const departures = '{{string_departures}}';
    console.log(typeof(departures));
    var value = JSON.parse(departures);
    console.log(value);
</script>

{% endblock %}